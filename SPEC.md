# ART-XHIBIT 웹사이트 개선 단계별 계획

## Phase 1: Supabase 인증 시스템 완전 통합

### 오버뷰
Supabase Auth를 활용하여 사용자 인증(회원가입, 로그인, 로그아웃) 기능을 완전히 구현합니다. 현재 부분적으로 설정된 Supabase를 활성화하고 실제 사용자 인증 플로우를 구축합니다.

### 수정/개선할 기능
- [x] Supabase client 유틸리티 함수 검증 및 보완 (`utils/supabase/`)
- [x] 회원가입 페이지 Server Action 완성 (`app/register/actions.ts`)
- [x] 로그인 페이지 Server Action 완성 (`app/login/actions.ts`)
- [x] 로그아웃 기능 구현 (`app/auth/signout/route.ts`)
- [x] 이메일 확인 라우트 구현 (`app/auth/confirm/route.ts`)
- [x] 헤더 컴포넌트의 사용자 상태 표시 검증 (`components/header.tsx`)
- [x] 인증 미들웨어 설정 (`middleware.ts`)
- [x] 환경 변수 설정 가이드 (.env.local 템플릿)

### 작업 완료 후 검증 사항
- [ ] 새 사용자가 이메일로 회원가입 가능
- [ ] 이메일 확인 링크가 작동
- [ ] 등록된 사용자가 로그인 가능
- [ ] 로그인 후 헤더에 사용자 이메일 표시
- [ ] 로그아웃 기능 작동
- [ ] 보호된 페이지(/my-page)는 로그인 필요
- [ ] 세션이 페이지 새로고침 후에도 유지

---

## Phase 2: 데이터베이스 스키마 구축 및 기본 데이터 마이그레이션

### 오버뷰
Supabase PostgreSQL 데이터베이스에 필요한 테이블을 생성하고, 가짜 데이터를 실제 데이터베이스로 마이그레이션합니다. RLS(Row Level Security) 정책도 설정합니다.

### 수정/개선할 기능
- [x] 데이터베이스 스키마 설계 및 마이그레이션 파일 작성
  - artists 테이블
  - artworks 테이블
  - profiles 테이블 (사용자 확장 정보)
- [x] RLS 정책 설정 (읽기는 공개, 쓰기는 작가만)
- [x] lib/data.ts의 가짜 데이터를 Supabase에 시드 데이터로 삽입
- [x] Supabase 클라이언트 쿼리 함수 작성 (`lib/supabase-queries.ts`)
- [x] TypeScript 타입 정의 업데이트 (`lib/types.ts` 또는 Supabase 자동 생성 타입)
- [x] 페이지 컴포넌트를 DB 쿼리로 전환
  - `app/page.tsx` - getFeaturedArtworks, getEndingSoonArtworks
  - `app/explore/page.tsx` - 전체 작품 목록
  - `app/artwork/[id]/page.tsx` - 작품 상세
  - `app/artist/[id]/page.tsx` - 작가 프로필

### 작업 완료 후 검증 사항
- [ ] Supabase 대시보드에서 모든 테이블 확인
- [ ] 시드 데이터(작가 5명, 작품 10개)가 DB에 존재
- [ ] 홈페이지에서 DB의 작품이 표시됨
- [ ] 작품 상세 페이지가 DB 데이터로 렌더링
- [ ] 작가 프로필 페이지가 DB 데이터로 렌더링
- [ ] 탐색 페이지의 검색/필터가 DB 쿼리로 작동
- [ ] RLS 정책으로 인증되지 않은 사용자는 읽기만 가능

---

## Phase 3: 좋아요 및 관심 작품 기능 구현

### 오버뷰
사용자가 작품에 좋아요를 누르고, 관심 작품을 저장/관리할 수 있는 기능을 구현합니다. 실시간으로 좋아요 수가 업데이트됩니다.

### 수정/개선할 기능
- [x] favorites 테이블 생성 (user_id, artwork_id, created_at)
- [x] RLS 정책 설정 (본인의 좋아요만 수정 가능)
- [x] 좋아요 토글 Server Action 구현 (`app/artwork/[id]/actions.ts`)
- [x] 작품 카드에 좋아요 버튼 추가 및 상태 표시
- [x] 작품 상세 페이지의 좋아요 버튼을 실제 기능으로 전환
- [x] 마이페이지 관심 작품 탭을 DB 쿼리로 전환 (`app/my-page/page.tsx`)
- [x] 좋아요 수 실시간 카운트 표시
- [x] 사용자별 좋아요 상태 표시 (이미 좋아요 눌렀는지)

### 작업 완료 후 검증 사항
- [x] 로그인한 사용자가 작품에 좋아요 추가/제거 가능
- [x] 좋아요 상태가 UI에 즉시 반영 (빨간 하트)
- [x] 좋아요 수가 정확하게 카운트됨
- [x] 마이페이지의 관심 작품 탭에 좋아요한 작품 표시
- [x] 로그인하지 않은 사용자는 좋아요 불가 (로그인 페이지로 리다이렉트)
- [x] 페이지 새로고침 후에도 좋아요 상태 유지

---

## Phase 4: 경매 입찰 시스템 구현

### 오버뷰
경매 작품에 대한 실시간 입찰 기능을 구현합니다. 입찰 내역 저장, 최고 입찰가 업데이트, 마이페이지에서 입찰 내역 조회 기능을 포함합니다.

### 수정/개선할 기능
- [x] bids 테이블 생성 (artwork_id, user_id, bid_amount, created_at)
- [x] RLS 정책 설정 (본인의 입찰 내역만 조회 가능, 작품별 최고가는 공개)
- [x] 입찰하기 Server Action 구현 (`app/artwork/[id]/bid-actions.ts`)
  - 현재 최고가보다 높은지 검증
  - 경매 종료 시간 체크
  - 입찰 기록 생성
  - artworks 테이블의 currentPrice, bidCount 업데이트
- [x] 작품 상세 페이지의 입찰 폼을 실제 기능으로 전환
- [x] 입찰 폼 유효성 검사 (최소 입찰 단위, 현재가보다 높은지)
- [x] 마이페이지 입찰 내역 탭을 DB 쿼리로 전환
- [x] 입찰 상태 표시 (최고 입찰자인지, 타인이 더 높은 가격 제시했는지)
- [x] 입찰 성공/실패 토스트 메시지 추가

### 작업 완료 후 검증 사항
- [x] 로그인한 사용자가 경매 작품에 입찰 가능
- [x] 현재가보다 낮은 금액은 입찰 불가
- [x] 입찰 성공 시 현재가와 입찰 수가 업데이트됨
- [x] 마이페이지에서 자신의 입찰 내역 확인 가능
- [x] 입찰 상태가 정확히 표시됨 (최고가 여부)
- [x] 경매 종료된 작품은 입찰 불가
- [x] 여러 사용자가 동시 입찰 시 정확한 최고가 반영

---

## Phase 5: 사용자 프로필 및 작가 기능 강화

### 오버뷰
사용자 프로필 관리 기능을 추가하고, 작가 사용자의 경우 자신의 작품을 업로드하고 관리할 수 있는 기능을 구현합니다.

### 수정/개선할 기능
- [x] profiles 테이블 확장 (role: buyer/artist, bio, profile_image, username 등)
- [x] 회원가입 시 프로필 생성 트리거 또는 로직 추가
- [x] 프로필 수정 페이지 생성 (`app/profile/edit/page.tsx`)
- [x] 프로필 수정 Server Action 구현
- [x] 작가 전용 대시보드 페이지 생성 (`app/artist-dashboard/page.tsx`)
  - 내 작품 목록
  - 작품 등록/수정/삭제
  - 판매 통계
- [x] 작품 등록 폼 생성 (`app/artist-dashboard/new-artwork/page.tsx`)
- [x] 작품 등록 Server Action (이미지 URL은 수동 입력, 실제 업로드는 Phase 6)
- [x] 작가 프로필 페이지에 해당 작가의 작품만 필터링하여 표시
- [x] 마이페이지에서 역할(buyer/artist)에 따라 다른 메뉴 표시

### 작업 완료 후 검증 사항
- [x] 사용자가 프로필 정보 수정 가능 (이름, bio, 프로필 이미지 URL)
- [x] 작가 역할의 사용자는 작가 대시보드 접근 가능
- [x] 작가가 새 작품 등록 가능 (제목, 설명, 카테고리, 가격, 판매 방식)
- [x] 작가 대시보드에서 본인 작품 목록 조회
- [x] 작가 대시보드에서 작품 수정/삭제 가능
- [x] 작가 프로필 페이지에서 해당 작가의 작품만 표시
- [x] 구매자 역할은 작가 대시보드 접근 불가

---

## Phase 6: 검색 및 필터링 기능 고도화

### 오버뷰
탐색 페이지의 검색 및 필터링 성능을 개선하고, 더 많은 필터 옵션을 추가합니다. Supabase의 Full-Text Search를 활용합니다.

### 수정/개선할 기능
- [x] Supabase Full-Text Search 인덱스 추가 (artworks.title, artworks.description)
- [x] 검색 쿼리 최적화 (`lib/queries/artworks.ts`)
- [x] 고급 필터 추가
  - 가격 범위 슬라이더
  - 작가별 필터
  - 경매 마감 임박 순 정렬
  - 입찰 수 많은 순 정렬
- [x] 필터 UI 사이드바로 개선
- [x] URL 쿼리 파라미터로 필터 상태 유지 (북마크 가능)
- [x] 페이지네이션 추가
- [x] 로딩 상태 표시 (Skeleton UI)
- [x] 검색 결과가 없을 때 추천 작품 표시

### 작업 완료 후 검증 사항
- [x] 키워드 검색이 제목과 설명에서 작동 (Full-Text Search)
- [x] 가격 범위 필터가 정확히 작동
- [x] 작가별 필터가 작동
- [x] 여러 필터를 동시에 적용 가능
- [x] 정렬 옵션이 모두 정확히 작동 (경매 마감 임박, 입찰 수 포함)
- [x] URL에 필터 상태가 반영되어 공유 가능
- [x] 페이지네이션이 부드럽게 작동
- [x] 로딩 중 Skeleton UI 표시

---

## Phase 7: 주문 및 구매 내역 관리

### 오버뷰
즉시 구매 작품 구매 기능과 경매 낙찰 후 주문 생성 로직을 구현합니다. 실제 결제는 연동하지 않고, 주문 기록만 저장합니다.

### 수정/개선할 기능
- [x] orders 테이블 생성 (user_id, artwork_id, order_type: purchase/auction, price, status, created_at)
- [x] RLS 정책 설정 (본인 주문만 조회 가능, 작가는 판매 내역 조회)
- [x] 즉시 구매 Server Action 구현 (`app/artwork/[id]/purchase-actions.ts`)
  - 작품 상태를 sold로 변경
  - orders 테이블에 주문 기록 생성
- [x] 경매 종료 처리 로직 (Supabase Edge Function 또는 Cron)
  - 경매 종료 시간이 지난 작품 확인
  - 최고 입찰자에게 자동으로 주문 생성
  - 작품 상태를 sold로 변경
- [x] 마이페이지 주문 내역 탭을 DB 쿼리로 전환
- [x] 주문 상태 관리 (배송 준비, 배송 중, 배송 완료)
- [x] 작가 대시보드에서 판매 내역 조회

### 작업 완료 후 검증 사항
- [x] 즉시 구매 작품 구매 가능
- [x] 구매 후 작품 상태가 sold로 변경
- [x] 마이페이지 주문 내역에 구매 기록 표시
- [x] 경매 종료 후 최고 입찰자에게 자동 주문 생성
- [x] 작가 대시보드에서 판매된 작품 확인 가능
- [x] 주문 상태가 정확히 표시됨
- [x] 판매된 작품은 더 이상 구매/입찰 불가

---

## Phase 8: UI/UX 개선 및 반응형 최적화

### 오버뷰
전체적인 사용자 경험을 개선하고, 모바일 반응형을 최적화하며, 접근성을 향상시킵니다.

### 수정/개선할 기능
- [x] 모바일 네비게이션 햄버거 메뉴 추가
- [x] 작품 카드 호버 효과 개선
- [x] 경매 종료 카운트다운 실시간 업데이트 (클라이언트 컴포넌트)
- [x] 토스트 알림 시스템 추가 (Sonner 또는 React Hot Toast)
- [x] 로딩 상태 및 에러 상태 UI 개선
- [x] 이미지 레이지 로딩 최적화
- [ ] 다크 모드 지원 (선택사항)
- [x] 접근성 개선 (ARIA 라벨, 키보드 네비게이션)
- [x] 애니메이션 추가 (Framer Motion)
- [x] 빈 상태 UI 개선 (검색 결과 없음, 작품 없음 등)

### 작업 완료 후 검증 사항
- [x] 모바일에서 모든 페이지가 정상 작동
- [x] 햄버거 메뉴로 모바일 네비게이션 접근 가능
- [x] 경매 카운트다운이 실시간으로 업데이트됨
- [x] 성공/실패 알림이 토스트로 표시됨
- [x] 로딩 중 적절한 스켈레톤 UI 표시
- [x] 이미지 로딩이 최적화되어 부드러움
- [x] 키보드만으로 주요 기능 사용 가능
- [x] 스크린 리더로 주요 정보 읽기 가능
